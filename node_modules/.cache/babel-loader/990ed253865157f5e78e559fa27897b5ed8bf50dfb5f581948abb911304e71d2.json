{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hp\\\\Desktop\\\\new\\\\project\\\\frontend\\\\src\\\\components\\\\MovieDetails.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { Helmet } from 'react-helmet';\nimport LazyLoad from 'react-lazyload';\nimport { getMovieDetails, getReviews, submitReview, submitReply, submitReaction } from '../api/api';\nimport '../styles.css';\n\n// Utility to format timestamp like YouTube (e.g., \"2 days ago\")\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst formatTimestamp = date => {\n  const now = new Date();\n  const diffMs = now - new Date(date);\n  const diffSeconds = Math.floor(diffMs / 1000);\n  const diffMinutes = Math.floor(diffSeconds / 60);\n  const diffHours = Math.floor(diffMinutes / 60);\n  const diffDays = Math.floor(diffHours / 24);\n  if (diffDays > 0) return `${diffDays} day${diffDays > 1 ? 's' : ''} ago`;\n  if (diffHours > 0) return `${diffHours} hour${diffHours > 1 ? 's' : ''} ago`;\n  if (diffMinutes > 0) return `${diffMinutes} minute${diffMinutes > 1 ? 's' : ''} ago`;\n  return 'Just now';\n};\n\n// Email validation regex\nconst emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\nfunction MovieDetails() {\n  _s();\n  var _movie$watchProviders, _movie$watchProviders2, _movie$watchProviders3;\n  const {\n    source,\n    externalId\n  } = useParams();\n  const [movie, setMovie] = useState(null);\n  const [reviews, setReviews] = useState([]);\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [reviewText, setReviewText] = useState('');\n  const [reviewName, setReviewName] = useState('');\n  const [reviewEmail, setReviewEmail] = useState('');\n  const [watchlist, setWatchlist] = useState(JSON.parse(localStorage.getItem('watchlist')) || []);\n  const [selectedTrailer, setSelectedTrailer] = useState(null);\n  const [reactionCounts, setReactionCounts] = useState({\n    excellent: 0,\n    loved: 0,\n    thanks: 0,\n    wow: 0,\n    sad: 0\n  });\n  const [replyingTo, setReplyingTo] = useState(null);\n  const [replyText, setReplyText] = useState('');\n  const [replyName, setReplyName] = useState('');\n  const [replyEmail, setReplyEmail] = useState('');\n  useEffect(() => {\n    let isMounted = true;\n    const fetchData = async () => {\n      try {\n        var _movieResponse$data;\n        console.log('Fetching movie details and reviews for:', {\n          source,\n          externalId\n        });\n        const [movieResponse, reviewsResponse] = await Promise.all([getMovieDetails(source, externalId), getReviews(source, externalId)]);\n        if (!isMounted) return;\n        if (!((_movieResponse$data = movieResponse.data) !== null && _movieResponse$data !== void 0 && _movieResponse$data.externalId)) {\n          throw new Error('Invalid movie data received');\n        }\n        console.log('Movie Details Response:', movieResponse.data);\n        console.log('Reviews Response:', reviewsResponse.data);\n        setMovie(movieResponse.data);\n        setReviews(Array.isArray(reviewsResponse.data) ? reviewsResponse.data : []);\n        setReactionCounts(movieResponse.data.reactionCounts || {\n          excellent: 0,\n          loved: 0,\n          thanks: 0,\n          wow: 0,\n          sad: 0\n        });\n        setError(null);\n      } catch (err) {\n        var _err$response, _err$response2;\n        console.error('Data loading error:', {\n          message: err.message,\n          response: (_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data,\n          status: (_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.status\n        });\n        if (isMounted) {\n          var _err$response3, _err$response3$data;\n          setError(((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.msg) || 'Failed to load movie details');\n        }\n      } finally {\n        if (isMounted) setLoading(false);\n      }\n    };\n    fetchData();\n    return () => {\n      isMounted = false;\n    };\n  }, [source, externalId]);\n  const handleAddToWatchlist = movie => {\n    if (!movie.source || !movie.externalId || movie.externalId === 'undefined') {\n      console.warn('Cannot add movie to watchlist, invalid data:', movie);\n      return;\n    }\n    const newWatchlist = [...watchlist, {\n      ...movie,\n      source: movie.source,\n      externalId: movie.externalId\n    }];\n    setWatchlist(newWatchlist);\n    localStorage.setItem('watchlist', JSON.stringify(newWatchlist));\n  };\n  const handleRemoveFromWatchlist = (externalId, source) => {\n    const newWatchlist = watchlist.filter(m => !(m.externalId === externalId && m.source === source));\n    setWatchlist(newWatchlist);\n    localStorage.setItem('watchlist', JSON.stringify(newWatchlist));\n  };\n  const handleImageError = (e, title) => {\n    console.log(`Image failed to load for ${title}: ${e.target.src}`);\n    e.target.src = 'https://placehold.co/300x450?text=No+Poster';\n  };\n  const openTrailerModal = trailerUrl => {\n    if (trailerUrl && trailerUrl !== 'N/A') {\n      setSelectedTrailer(trailerUrl);\n    }\n  };\n  const closeTrailerModal = () => {\n    setSelectedTrailer(null);\n  };\n  const handleSubmitReview = async e => {\n    e.preventDefault();\n    if (!reviewText.trim() || !reviewName.trim() || !reviewEmail.trim()) {\n      setError('Please fill all fields (name, email, review).');\n      return;\n    }\n    if (!emailRegex.test(reviewEmail)) {\n      setError('Please enter a valid email address (e.g., user@example.com).');\n      return;\n    }\n    try {\n      await submitReview(source, externalId, {\n        text: reviewText,\n        name: reviewName,\n        email: reviewEmail\n      });\n      const reviewsResponse = await getReviews(source, externalId);\n      setReviews(Array.isArray(reviewsResponse.data) ? reviewsResponse.data : []);\n      setReviewText('');\n      setReviewName('');\n      setReviewEmail('');\n      setError(null);\n    } catch (err) {\n      var _err$response4, _err$response4$data;\n      setError(((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : (_err$response4$data = _err$response4.data) === null || _err$response4$data === void 0 ? void 0 : _err$response4$data.msg) || 'Failed to submit review. Check console for details.');\n    }\n  };\n  const handleReaction = async reaction => {\n    try {\n      const response = await submitReaction(source, externalId, reaction);\n      setReactionCounts(response.data.reactionCounts);\n      setError(null);\n    } catch (err) {\n      setError('Failed to submit reaction. Check console for details.');\n    }\n  };\n  const handleReply = async reviewId => {\n    if (!replyText.trim() || !replyName.trim() || !replyEmail.trim()) {\n      setError('Please fill all fields (name, email, reply).');\n      return;\n    }\n    if (!emailRegex.test(replyEmail)) {\n      setError('Please enter a valid email address (e.g., user@example.com).');\n      return;\n    }\n    try {\n      const response = await submitReply(source, externalId, reviewId, {\n        text: replyText,\n        name: replyName,\n        email: replyEmail\n      });\n      setReviews(prev => prev.map(review => review._id === reviewId ? response.data : review));\n      setReplyText('');\n      setReplyName('');\n      setReplyEmail('');\n      setReplyingTo(null);\n      setError(null);\n    } catch (err) {\n      var _err$response5, _err$response5$data;\n      setError(((_err$response5 = err.response) === null || _err$response5 === void 0 ? void 0 : (_err$response5$data = _err$response5.data) === null || _err$response5$data === void 0 ? void 0 : _err$response5$data.msg) || 'Failed to submit reply. Check console for details.');\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-screen\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading movie details...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }, this);\n  }\n  if (error && !movie) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-screen\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Oops! Something went wrong\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        className: \"home-link\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"cta-button\",\n          children: \"Return to Home\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"movie-details fade-in\",\n    children: [/*#__PURE__*/_jsxDEV(Helmet, {\n      children: [/*#__PURE__*/_jsxDEV(\"title\", {\n        children: movie !== null && movie !== void 0 && movie.title ? `${movie.title} - MovieVerse` : 'Movie Details - MovieVerse'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        name: \"description\",\n        content: (movie === null || movie === void 0 ? void 0 : movie.overview) || 'View movie details on MovieVerse'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }, this), selectedTrailer && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"trailer-modal\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"trailer-modal-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"trailer-modal-close\",\n          onClick: closeTrailerModal,\n          \"aria-label\": \"Close trailer modal\",\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"iframe\", {\n          width: \"100%\",\n          height: \"100%\",\n          src: selectedTrailer.replace('watch?v=', 'embed/'),\n          title: \"Movie Trailer\",\n          frameBorder: \"0\",\n          allow: \"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\",\n          allowFullScreen: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"details-header\",\n      children: /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        className: \"home-link\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"logo\",\n          children: \"MovieVerse\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"movie-content\",\n      children: movie && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: movie.title || 'Untitled Movie'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"movie-poster\",\n          children: /*#__PURE__*/_jsxDEV(LazyLoad, {\n            height: 450,\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: movie.poster || 'https://placehold.co/300x450?text=No+Poster',\n              alt: movie.title || 'Movie Poster',\n              onError: e => handleImageError(e, movie.title || 'Unknown')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 13\n        }, this), movie.screenshots && movie.screenshots.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"category-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Screenshots\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"movie-grid horizontal-scroll\",\n            children: movie.screenshots.map((screenshot, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"movie-card\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"movie-poster\",\n                children: /*#__PURE__*/_jsxDEV(LazyLoad, {\n                  height: 300,\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: screenshot || 'https://placehold.co/200x300?text=No+Screenshot',\n                    alt: `${movie.title} Screenshot ${index + 1}`,\n                    onError: e => handleImageError(e, `${movie.title} Screenshot ${index + 1}`),\n                    style: {\n                      width: '200px',\n                      height: '300px',\n                      objectFit: 'cover'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 256,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 255,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 254,\n                columnNumber: 23\n              }, this)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"storyline\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Storyline\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: movie.overview || 'No storyline available.'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"download-links\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Watch Options\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 15\n          }, this), movie.directLink ? /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(\"a\", {\n                href: movie.directLink,\n                target: \"_blank\",\n                rel: \"noopener noreferrer\",\n                children: \"Watch Now on Internet Archive\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 17\n          }, this) : ((_movie$watchProviders = movie.watchProviders) === null || _movie$watchProviders === void 0 ? void 0 : (_movie$watchProviders2 = _movie$watchProviders.US) === null || _movie$watchProviders2 === void 0 ? void 0 : (_movie$watchProviders3 = _movie$watchProviders2.ads) === null || _movie$watchProviders3 === void 0 ? void 0 : _movie$watchProviders3.length) > 0 ? /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: movie.watchProviders.US.ads.map((provider, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              children: provider.provider_name\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No watch options available.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"reactions\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Reactions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"reaction-buttons\",\n            children: Object.keys(reactionCounts).map(reaction => /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"reaction-btn\",\n              onClick: () => handleReaction(reaction),\n              \"aria-label\": `React with ${reaction}`,\n              style: {\n                margin: '0 5px',\n                padding: '5px 10px',\n                fontSize: '14px'\n              },\n              children: [reaction.charAt(0).toUpperCase() + reaction.slice(1), \" (\", reactionCounts[reaction], \")\"]\n            }, reaction, true, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"hero-buttons\",\n          children: [movie.trailer && movie.trailer !== 'N/A' && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"cta-button hero-button play-trailer\",\n            onClick: () => openTrailerModal(movie.trailer),\n            \"aria-label\": `Play trailer for ${movie.title}`,\n            children: \"Play Trailer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 17\n          }, this), watchlist.some(m => m.externalId === externalId && m.source === source) ? /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"cta-button hero-button\",\n            onClick: () => handleRemoveFromWatchlist(externalId, source),\n            \"aria-label\": `Remove ${movie.title} from watchlist`,\n            children: \"Remove from Watchlist\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"cta-button hero-button\",\n            onClick: () => handleAddToWatchlist(movie),\n            \"aria-label\": `Add ${movie.title} to watchlist`,\n            children: \"Add to Watchlist\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"reviews-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Reviews\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 15\n          }, this), reviews.length > 0 ? reviews.map(review => {\n            var _review$user, _review$replies;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"comment-item\",\n              style: {\n                display: 'flex',\n                marginBottom: '15px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: ((_review$user = review.user) === null || _review$user === void 0 ? void 0 : _review$user.avatar) || 'https://placehold.co/40x40?text=User',\n                alt: \"User avatar\",\n                className: \"comment-avatar\",\n                style: {\n                  width: '40px',\n                  height: '40px',\n                  borderRadius: '50%',\n                  marginRight: '10px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 347,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"comment-content\",\n                style: {\n                  flex: 1\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'flex',\n                    alignItems: 'center',\n                    marginBottom: '5px'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"comment-username\",\n                    style: {\n                      fontWeight: 'bold',\n                      margin: '0',\n                      marginRight: '5px'\n                    },\n                    children: review.name || 'Anonymous'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 355,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      color: '#666',\n                      fontSize: '12px',\n                      marginRight: '5px'\n                    },\n                    children: \"\\u2022\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 358,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"comment-time\",\n                    style: {\n                      color: '#666',\n                      fontSize: '12px',\n                      margin: '0'\n                    },\n                    children: formatTimestamp(review.createdAt)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 359,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 354,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"comment-text\",\n                  style: {\n                    margin: '0 0 5px 0'\n                  },\n                  children: review.text\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 363,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"reply-btn\",\n                  onClick: () => setReplyingTo(review._id === replyingTo ? null : review._id),\n                  \"aria-label\": `Reply to ${review.name || 'Anonymous'}`,\n                  style: {\n                    color: '#1a73e8',\n                    background: 'none',\n                    border: 'none',\n                    cursor: 'pointer',\n                    padding: '0',\n                    fontSize: '14px'\n                  },\n                  children: \"Reply\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 364,\n                  columnNumber: 23\n                }, this), replyingTo === review._id && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"reply-form\",\n                  style: {\n                    marginTop: '10px',\n                    display: 'flex',\n                    alignItems: 'center'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: \"https://placehold.co/40x40?text=User\",\n                    alt: \"User avatar\",\n                    style: {\n                      width: '40px',\n                      height: '40px',\n                      borderRadius: '50%',\n                      marginRight: '10px'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 374,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      flex: 1\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      value: replyName,\n                      onChange: e => setReplyName(e.target.value),\n                      placeholder: \"Your name...\",\n                      \"aria-label\": \"Reply name\",\n                      style: {\n                        width: '100%',\n                        marginBottom: '5px',\n                        padding: '5px'\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 380,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"email\",\n                      value: replyEmail,\n                      onChange: e => setReplyEmail(e.target.value),\n                      placeholder: \"Your email...\",\n                      \"aria-label\": \"Reply email\",\n                      style: {\n                        width: '100%',\n                        marginBottom: '5px',\n                        padding: '5px'\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 388,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      value: replyText,\n                      onChange: e => setReplyText(e.target.value),\n                      placeholder: \"Write a reply...\",\n                      \"aria-label\": \"Reply text\",\n                      style: {\n                        width: '100%',\n                        marginBottom: '5px',\n                        padding: '5px'\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 396,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"cta-button\",\n                      onClick: () => handleReply(review._id),\n                      \"aria-label\": \"Submit reply\",\n                      style: {\n                        padding: '5px 10px',\n                        fontSize: '14px'\n                      },\n                      children: \"Submit Reply\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 404,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 379,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 373,\n                  columnNumber: 25\n                }, this), ((_review$replies = review.replies) === null || _review$replies === void 0 ? void 0 : _review$replies.length) > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"replies-container\",\n                  style: {\n                    marginTop: '10px',\n                    marginLeft: '50px'\n                  },\n                  children: review.replies.map(reply => {\n                    var _reply$user;\n                    return /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"reply-item\",\n                      style: {\n                        display: 'flex',\n                        marginBottom: '10px'\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                        src: ((_reply$user = reply.user) === null || _reply$user === void 0 ? void 0 : _reply$user.avatar) || 'https://placehold.co/30x30?text=User',\n                        alt: \"User avatar\",\n                        className: \"comment-avatar\",\n                        style: {\n                          width: '30px',\n                          height: '30px',\n                          borderRadius: '50%',\n                          marginRight: '10px'\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 419,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"comment-content\",\n                        style: {\n                          flex: 1\n                        },\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          style: {\n                            display: 'flex',\n                            alignItems: 'center',\n                            marginBottom: '5px'\n                          },\n                          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                            className: \"comment-username\",\n                            style: {\n                              fontWeight: 'bold',\n                              margin: '0',\n                              marginRight: '5px'\n                            },\n                            children: reply.name || 'Anonymous'\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 427,\n                            columnNumber: 35\n                          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                            style: {\n                              color: '#666',\n                              fontSize: '12px',\n                              marginRight: '5px'\n                            },\n                            children: \"\\u2022\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 430,\n                            columnNumber: 35\n                          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                            className: \"comment-time\",\n                            style: {\n                              color: '#666',\n                              fontSize: '12px',\n                              margin: '0'\n                            },\n                            children: formatTimestamp(reply.createdAt)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 431,\n                            columnNumber: 35\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 426,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \"comment-text\",\n                          style: {\n                            margin: '0'\n                          },\n                          children: reply.text\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 435,\n                          columnNumber: 33\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 425,\n                        columnNumber: 31\n                      }, this)]\n                    }, reply._id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 418,\n                      columnNumber: 29\n                    }, this);\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 416,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 353,\n                columnNumber: 21\n              }, this)]\n            }, review._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 346,\n              columnNumber: 19\n            }, this);\n          }) : /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No reviews yet. Be the first to review!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"review-form\",\n            style: {\n              marginTop: '20px',\n              display: 'flex',\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"https://placehold.co/40x40?text=User\",\n              alt: \"User avatar\",\n              style: {\n                width: '40px',\n                height: '40px',\n                borderRadius: '50%',\n                marginRight: '10px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 449,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                flex: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                style: {\n                  margin: '0 0 10px 0'\n                },\n                children: \"Write a Review\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 455,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: reviewName,\n                onChange: e => setReviewName(e.target.value),\n                placeholder: \"Your name...\",\n                \"aria-label\": \"Review name\",\n                style: {\n                  width: '100%',\n                  marginBottom: '5px',\n                  padding: '5px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 456,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"email\",\n                value: reviewEmail,\n                onChange: e => setReviewEmail(e.target.value),\n                placeholder: \"Your email...\",\n                \"aria-label\": \"Review email\",\n                style: {\n                  width: '100%',\n                  marginBottom: '5px',\n                  padding: '5px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 464,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: reviewText,\n                onChange: e => setReviewText(e.target.value),\n                placeholder: \"Write your review...\",\n                \"aria-label\": \"Review text\",\n                style: {\n                  width: '100%',\n                  marginBottom: '5px',\n                  padding: '5px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 472,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"cta-button\",\n                onClick: handleSubmitReview,\n                \"aria-label\": \"Submit review\",\n                style: {\n                  padding: '5px 10px',\n                  fontSize: '14px'\n                },\n                children: \"Submit Review\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 480,\n                columnNumber: 19\n              }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"error-message\",\n                style: {\n                  color: 'red',\n                  marginTop: '5px'\n                },\n                children: error\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 488,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 454,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 448,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: \"details-footer\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\xA9 2025 MovieVerse. All rights reserved.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 497,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"footer-links\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          children: \"Home\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 499,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/privacy\",\n          children: \"Privacy\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 500,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/terms\",\n          children: \"Terms\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 501,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 498,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 496,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 203,\n    columnNumber: 5\n  }, this);\n}\n_s(MovieDetails, \"XBoN+FE5PMdzUN8Cxv5GUDiD/18=\", false, function () {\n  return [useParams];\n});\n_c = MovieDetails;\nexport default MovieDetails;\nvar _c;\n$RefreshReg$(_c, \"MovieDetails\");","map":{"version":3,"names":["useState","useEffect","useParams","Link","Helmet","LazyLoad","getMovieDetails","getReviews","submitReview","submitReply","submitReaction","jsxDEV","_jsxDEV","Fragment","_Fragment","formatTimestamp","date","now","Date","diffMs","diffSeconds","Math","floor","diffMinutes","diffHours","diffDays","emailRegex","MovieDetails","_s","_movie$watchProviders","_movie$watchProviders2","_movie$watchProviders3","source","externalId","movie","setMovie","reviews","setReviews","error","setError","loading","setLoading","reviewText","setReviewText","reviewName","setReviewName","reviewEmail","setReviewEmail","watchlist","setWatchlist","JSON","parse","localStorage","getItem","selectedTrailer","setSelectedTrailer","reactionCounts","setReactionCounts","excellent","loved","thanks","wow","sad","replyingTo","setReplyingTo","replyText","setReplyText","replyName","setReplyName","replyEmail","setReplyEmail","isMounted","fetchData","_movieResponse$data","console","log","movieResponse","reviewsResponse","Promise","all","data","Error","Array","isArray","err","_err$response","_err$response2","message","response","status","_err$response3","_err$response3$data","msg","handleAddToWatchlist","warn","newWatchlist","setItem","stringify","handleRemoveFromWatchlist","filter","m","handleImageError","e","title","target","src","openTrailerModal","trailerUrl","closeTrailerModal","handleSubmitReview","preventDefault","trim","test","text","name","email","_err$response4","_err$response4$data","handleReaction","reaction","handleReply","reviewId","prev","map","review","_id","_err$response5","_err$response5$data","className","children","fileName","_jsxFileName","lineNumber","columnNumber","to","content","overview","onClick","width","height","replace","frameBorder","allow","allowFullScreen","poster","alt","onError","screenshots","length","screenshot","index","style","objectFit","directLink","href","rel","watchProviders","US","ads","provider","provider_name","Object","keys","margin","padding","fontSize","charAt","toUpperCase","slice","trailer","some","_review$user","_review$replies","display","marginBottom","user","avatar","borderRadius","marginRight","flex","alignItems","fontWeight","color","createdAt","background","border","cursor","marginTop","type","value","onChange","placeholder","replies","marginLeft","reply","_reply$user","_c","$RefreshReg$"],"sources":["C:/Users/hp/Desktop/new/project/frontend/src/components/MovieDetails.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useParams, Link } from 'react-router-dom';\r\nimport { Helmet } from 'react-helmet';\r\nimport LazyLoad from 'react-lazyload';\r\nimport { getMovieDetails, getReviews, submitReview, submitReply, submitReaction } from '../api/api';\r\nimport '../styles.css';\r\n\r\n// Utility to format timestamp like YouTube (e.g., \"2 days ago\")\r\nconst formatTimestamp = (date) => {\r\n  const now = new Date();\r\n  const diffMs = now - new Date(date);\r\n  const diffSeconds = Math.floor(diffMs / 1000);\r\n  const diffMinutes = Math.floor(diffSeconds / 60);\r\n  const diffHours = Math.floor(diffMinutes / 60);\r\n  const diffDays = Math.floor(diffHours / 24);\r\n\r\n  if (diffDays > 0) return `${diffDays} day${diffDays > 1 ? 's' : ''} ago`;\r\n  if (diffHours > 0) return `${diffHours} hour${diffHours > 1 ? 's' : ''} ago`;\r\n  if (diffMinutes > 0) return `${diffMinutes} minute${diffMinutes > 1 ? 's' : ''} ago`;\r\n  return 'Just now';\r\n};\r\n\r\n// Email validation regex\r\nconst emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n\r\nfunction MovieDetails() {\r\n  const { source, externalId } = useParams();\r\n  const [movie, setMovie] = useState(null);\r\n  const [reviews, setReviews] = useState([]);\r\n  const [error, setError] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [reviewText, setReviewText] = useState('');\r\n  const [reviewName, setReviewName] = useState('');\r\n  const [reviewEmail, setReviewEmail] = useState('');\r\n  const [watchlist, setWatchlist] = useState(JSON.parse(localStorage.getItem('watchlist')) || []);\r\n  const [selectedTrailer, setSelectedTrailer] = useState(null);\r\n  const [reactionCounts, setReactionCounts] = useState({ excellent: 0, loved: 0, thanks: 0, wow: 0, sad: 0 });\r\n  const [replyingTo, setReplyingTo] = useState(null);\r\n  const [replyText, setReplyText] = useState('');\r\n  const [replyName, setReplyName] = useState('');\r\n  const [replyEmail, setReplyEmail] = useState('');\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n\r\n    const fetchData = async () => {\r\n      try {\r\n        console.log('Fetching movie details and reviews for:', { source, externalId });\r\n        const [movieResponse, reviewsResponse] = await Promise.all([\r\n          getMovieDetails(source, externalId),\r\n          getReviews(source, externalId),\r\n        ]);\r\n\r\n        if (!isMounted) return;\r\n\r\n        if (!movieResponse.data?.externalId) {\r\n          throw new Error('Invalid movie data received');\r\n        }\r\n\r\n        console.log('Movie Details Response:', movieResponse.data);\r\n        console.log('Reviews Response:', reviewsResponse.data);\r\n        setMovie(movieResponse.data);\r\n        setReviews(Array.isArray(reviewsResponse.data) ? reviewsResponse.data : []);\r\n        setReactionCounts(\r\n          movieResponse.data.reactionCounts || { excellent: 0, loved: 0, thanks: 0, wow: 0, sad: 0 }\r\n        );\r\n        setError(null);\r\n      } catch (err) {\r\n        console.error('Data loading error:', {\r\n          message: err.message,\r\n          response: err.response?.data,\r\n          status: err.response?.status,\r\n        });\r\n        if (isMounted) {\r\n          setError(err.response?.data?.msg || 'Failed to load movie details');\r\n        }\r\n      } finally {\r\n        if (isMounted) setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, [source, externalId]);\r\n\r\n  const handleAddToWatchlist = (movie) => {\r\n    if (!movie.source || !movie.externalId || movie.externalId === 'undefined') {\r\n      console.warn('Cannot add movie to watchlist, invalid data:', movie);\r\n      return;\r\n    }\r\n    const newWatchlist = [...watchlist, { ...movie, source: movie.source, externalId: movie.externalId }];\r\n    setWatchlist(newWatchlist);\r\n    localStorage.setItem('watchlist', JSON.stringify(newWatchlist));\r\n  };\r\n\r\n  const handleRemoveFromWatchlist = (externalId, source) => {\r\n    const newWatchlist = watchlist.filter((m) => !(m.externalId === externalId && m.source === source));\r\n    setWatchlist(newWatchlist);\r\n    localStorage.setItem('watchlist', JSON.stringify(newWatchlist));\r\n  };\r\n\r\n  const handleImageError = (e, title) => {\r\n    console.log(`Image failed to load for ${title}: ${e.target.src}`);\r\n    e.target.src = 'https://placehold.co/300x450?text=No+Poster';\r\n  };\r\n\r\n  const openTrailerModal = (trailerUrl) => {\r\n    if (trailerUrl && trailerUrl !== 'N/A') {\r\n      setSelectedTrailer(trailerUrl);\r\n    }\r\n  };\r\n\r\n  const closeTrailerModal = () => {\r\n    setSelectedTrailer(null);\r\n  };\r\n\r\n  const handleSubmitReview = async (e) => {\r\n    e.preventDefault();\r\n    if (!reviewText.trim() || !reviewName.trim() || !reviewEmail.trim()) {\r\n      setError('Please fill all fields (name, email, review).');\r\n      return;\r\n    }\r\n    if (!emailRegex.test(reviewEmail)) {\r\n      setError('Please enter a valid email address (e.g., user@example.com).');\r\n      return;\r\n    }\r\n    try {\r\n      await submitReview(source, externalId, { text: reviewText, name: reviewName, email: reviewEmail });\r\n      const reviewsResponse = await getReviews(source, externalId);\r\n      setReviews(Array.isArray(reviewsResponse.data) ? reviewsResponse.data : []);\r\n      setReviewText('');\r\n      setReviewName('');\r\n      setReviewEmail('');\r\n      setError(null);\r\n    } catch (err) {\r\n      setError(err.response?.data?.msg || 'Failed to submit review. Check console for details.');\r\n    }\r\n  };\r\n\r\n  const handleReaction = async (reaction) => {\r\n    try {\r\n      const response = await submitReaction(source, externalId, reaction);\r\n      setReactionCounts(response.data.reactionCounts);\r\n      setError(null);\r\n    } catch (err) {\r\n      setError('Failed to submit reaction. Check console for details.');\r\n    }\r\n  };\r\n\r\n  const handleReply = async (reviewId) => {\r\n    if (!replyText.trim() || !replyName.trim() || !replyEmail.trim()) {\r\n      setError('Please fill all fields (name, email, reply).');\r\n      return;\r\n    }\r\n    if (!emailRegex.test(replyEmail)) {\r\n      setError('Please enter a valid email address (e.g., user@example.com).');\r\n      return;\r\n    }\r\n    try {\r\n      const response = await submitReply(source, externalId, reviewId, {\r\n        text: replyText,\r\n        name: replyName,\r\n        email: replyEmail,\r\n      });\r\n      setReviews((prev) =>\r\n        prev.map((review) => (review._id === reviewId ? response.data : review))\r\n      );\r\n      setReplyText('');\r\n      setReplyName('');\r\n      setReplyEmail('');\r\n      setReplyingTo(null);\r\n      setError(null);\r\n    } catch (err) {\r\n      setError(err.response?.data?.msg || 'Failed to submit reply. Check console for details.');\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"loading-screen\">\r\n        <div className=\"spinner\"></div>\r\n        <p>Loading movie details...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error && !movie) {\r\n    return (\r\n      <div className=\"error-screen\">\r\n        <h2>Oops! Something went wrong</h2>\r\n        <p>{error}</p>\r\n        <Link to=\"/\" className=\"home-link\">\r\n          <button className=\"cta-button\">Return to Home</button>\r\n        </Link>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"movie-details fade-in\">\r\n      <Helmet>\r\n        <title>{movie?.title ? `${movie.title} - MovieVerse` : 'Movie Details - MovieVerse'}</title>\r\n        <meta name=\"description\" content={movie?.overview || 'View movie details on MovieVerse'} />\r\n      </Helmet>\r\n\r\n      {selectedTrailer && (\r\n        <div className=\"trailer-modal\">\r\n          <div className=\"trailer-modal-content\">\r\n            <button className=\"trailer-modal-close\" onClick={closeTrailerModal} aria-label=\"Close trailer modal\">\r\n              \r\n            </button>\r\n            <iframe\r\n              width=\"100%\"\r\n              height=\"100%\"\r\n              src={selectedTrailer.replace('watch?v=', 'embed/')}\r\n              title=\"Movie Trailer\"\r\n              frameBorder=\"0\"\r\n              allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n              allowFullScreen\r\n            ></iframe>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <header className=\"details-header\">\r\n        <Link to=\"/\" className=\"home-link\">\r\n          <h1 className=\"logo\">MovieVerse</h1>\r\n        </Link>\r\n      </header>\r\n\r\n      <div className=\"movie-content\">\r\n        {movie && (\r\n          <>\r\n            <h1>{movie.title || 'Untitled Movie'}</h1>\r\n            <div className=\"movie-poster\">\r\n              <LazyLoad height={450}>\r\n                <img\r\n                  src={movie.poster || 'https://placehold.co/300x450?text=No+Poster'}\r\n                  alt={movie.title || 'Movie Poster'}\r\n                  onError={(e) => handleImageError(e, movie.title || 'Unknown')}\r\n                />\r\n              </LazyLoad>\r\n            </div>\r\n\r\n            {movie.screenshots && movie.screenshots.length > 0 && (\r\n              <div className=\"category-section\">\r\n                <h2>Screenshots</h2>\r\n                <div className=\"movie-grid horizontal-scroll\">\r\n                  {movie.screenshots.map((screenshot, index) => (\r\n                    <div key={index} className=\"movie-card\">\r\n                      <div className=\"movie-poster\">\r\n                        <LazyLoad height={300}>\r\n                          <img\r\n                            src={screenshot || 'https://placehold.co/200x300?text=No+Screenshot'}\r\n                            alt={`${movie.title} Screenshot ${index + 1}`}\r\n                            onError={(e) => handleImageError(e, `${movie.title} Screenshot ${index + 1}`)}\r\n                            style={{ width: '200px', height: '300px', objectFit: 'cover' }}\r\n                          />\r\n                        </LazyLoad>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"storyline\">\r\n              <h2>Storyline</h2>\r\n              <p>{movie.overview || 'No storyline available.'}</p>\r\n            </div>\r\n\r\n            <div className=\"download-links\">\r\n              <h2>Watch Options</h2>\r\n              {movie.directLink ? (\r\n                <ul>\r\n                  <li>\r\n                    <a href={movie.directLink} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                      Watch Now on Internet Archive\r\n                    </a>\r\n                  </li>\r\n                </ul>\r\n              ) : movie.watchProviders?.US?.ads?.length > 0 ? (\r\n                <ul>\r\n                  {movie.watchProviders.US.ads.map((provider, index) => (\r\n                    <li key={index}>{provider.provider_name}</li>\r\n                  ))}\r\n                </ul>\r\n              ) : (\r\n                <p>No watch options available.</p>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"reactions\">\r\n              <h2>Reactions</h2>\r\n              <div className=\"reaction-buttons\">\r\n                {Object.keys(reactionCounts).map((reaction) => (\r\n                  <button\r\n                    key={reaction}\r\n                    className=\"reaction-btn\"\r\n                    onClick={() => handleReaction(reaction)}\r\n                    aria-label={`React with ${reaction}`}\r\n                    style={{ margin: '0 5px', padding: '5px 10px', fontSize: '14px' }}\r\n                  >\r\n                    {reaction.charAt(0).toUpperCase() + reaction.slice(1)} ({reactionCounts[reaction]})\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"hero-buttons\">\r\n              {movie.trailer && movie.trailer !== 'N/A' && (\r\n                <button\r\n                  className=\"cta-button hero-button play-trailer\"\r\n                  onClick={() => openTrailerModal(movie.trailer)}\r\n                  aria-label={`Play trailer for ${movie.title}`}\r\n                >\r\n                  Play Trailer\r\n                </button>\r\n              )}\r\n              {watchlist.some((m) => m.externalId === externalId && m.source === source) ? (\r\n                <button\r\n                  className=\"cta-button hero-button\"\r\n                  onClick={() => handleRemoveFromWatchlist(externalId, source)}\r\n                  aria-label={`Remove ${movie.title} from watchlist`}\r\n                >\r\n                  Remove from Watchlist\r\n                </button>\r\n              ) : (\r\n                <button\r\n                  className=\"cta-button hero-button\"\r\n                  onClick={() => handleAddToWatchlist(movie)}\r\n                  aria-label={`Add ${movie.title} to watchlist`}\r\n                >\r\n                  Add to Watchlist\r\n                </button>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"reviews-section\">\r\n              <h3>Reviews</h3>\r\n              {reviews.length > 0 ? (\r\n                reviews.map((review) => (\r\n                  <div key={review._id} className=\"comment-item\" style={{ display: 'flex', marginBottom: '15px' }}>\r\n                    <img\r\n                      src={review.user?.avatar || 'https://placehold.co/40x40?text=User'}\r\n                      alt=\"User avatar\"\r\n                      className=\"comment-avatar\"\r\n                      style={{ width: '40px', height: '40px', borderRadius: '50%', marginRight: '10px' }}\r\n                    />\r\n                    <div className=\"comment-content\" style={{ flex: 1 }}>\r\n                      <div style={{ display: 'flex', alignItems: 'center', marginBottom: '5px' }}>\r\n                        <p className=\"comment-username\" style={{ fontWeight: 'bold', margin: '0', marginRight: '5px' }}>\r\n                          {review.name || 'Anonymous'}\r\n                        </p>\r\n                        <span style={{ color: '#666', fontSize: '12px', marginRight: '5px' }}></span>\r\n                        <p className=\"comment-time\" style={{ color: '#666', fontSize: '12px', margin: '0' }}>\r\n                          {formatTimestamp(review.createdAt)}\r\n                        </p>\r\n                      </div>\r\n                      <p className=\"comment-text\" style={{ margin: '0 0 5px 0' }}>{review.text}</p>\r\n                      <button\r\n                        className=\"reply-btn\"\r\n                        onClick={() => setReplyingTo(review._id === replyingTo ? null : review._id)}\r\n                        aria-label={`Reply to ${review.name || 'Anonymous'}`}\r\n                        style={{ color: '#1a73e8', background: 'none', border: 'none', cursor: 'pointer', padding: '0', fontSize: '14px' }}\r\n                      >\r\n                        Reply\r\n                      </button>\r\n                      {replyingTo === review._id && (\r\n                        <div className=\"reply-form\" style={{ marginTop: '10px', display: 'flex', alignItems: 'center' }}>\r\n                          <img\r\n                            src=\"https://placehold.co/40x40?text=User\"\r\n                            alt=\"User avatar\"\r\n                            style={{ width: '40px', height: '40px', borderRadius: '50%', marginRight: '10px' }}\r\n                          />\r\n                          <div style={{ flex: 1 }}>\r\n                            <input\r\n                              type=\"text\"\r\n                              value={replyName}\r\n                              onChange={(e) => setReplyName(e.target.value)}\r\n                              placeholder=\"Your name...\"\r\n                              aria-label=\"Reply name\"\r\n                              style={{ width: '100%', marginBottom: '5px', padding: '5px' }}\r\n                            />\r\n                            <input\r\n                              type=\"email\"\r\n                              value={replyEmail}\r\n                              onChange={(e) => setReplyEmail(e.target.value)}\r\n                              placeholder=\"Your email...\"\r\n                              aria-label=\"Reply email\"\r\n                              style={{ width: '100%', marginBottom: '5px', padding: '5px' }}\r\n                            />\r\n                            <input\r\n                              type=\"text\"\r\n                              value={replyText}\r\n                              onChange={(e) => setReplyText(e.target.value)}\r\n                              placeholder=\"Write a reply...\"\r\n                              aria-label=\"Reply text\"\r\n                              style={{ width: '100%', marginBottom: '5px', padding: '5px' }}\r\n                            />\r\n                            <button\r\n                              className=\"cta-button\"\r\n                              onClick={() => handleReply(review._id)}\r\n                              aria-label=\"Submit reply\"\r\n                              style={{ padding: '5px 10px', fontSize: '14px' }}\r\n                            >\r\n                              Submit Reply\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                      {review.replies?.length > 0 && (\r\n                        <div className=\"replies-container\" style={{ marginTop: '10px', marginLeft: '50px' }}>\r\n                          {review.replies.map((reply) => (\r\n                            <div key={reply._id} className=\"reply-item\" style={{ display: 'flex', marginBottom: '10px' }}>\r\n                              <img\r\n                                src={reply.user?.avatar || 'https://placehold.co/30x30?text=User'}\r\n                                alt=\"User avatar\"\r\n                                className=\"comment-avatar\"\r\n                                style={{ width: '30px', height: '30px', borderRadius: '50%', marginRight: '10px' }}\r\n                              />\r\n                              <div className=\"comment-content\" style={{ flex: 1 }}>\r\n                                <div style={{ display: 'flex', alignItems: 'center', marginBottom: '5px' }}>\r\n                                  <p className=\"comment-username\" style={{ fontWeight: 'bold', margin: '0', marginRight: '5px' }}>\r\n                                    {reply.name || 'Anonymous'}\r\n                                  </p>\r\n                                  <span style={{ color: '#666', fontSize: '12px', marginRight: '5px' }}></span>\r\n                                  <p className=\"comment-time\" style={{ color: '#666', fontSize: '12px', margin: '0' }}>\r\n                                    {formatTimestamp(reply.createdAt)}\r\n                                  </p>\r\n                                </div>\r\n                                <p className=\"comment-text\" style={{ margin: '0' }}>{reply.text}</p>\r\n                              </div>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                ))\r\n              ) : (\r\n                <p>No reviews yet. Be the first to review!</p>\r\n              )}\r\n\r\n              <div className=\"review-form\" style={{ marginTop: '20px', display: 'flex', alignItems: 'center' }}>\r\n                <img\r\n                  src=\"https://placehold.co/40x40?text=User\"\r\n                  alt=\"User avatar\"\r\n                  style={{ width: '40px', height: '40px', borderRadius: '50%', marginRight: '10px' }}\r\n                />\r\n                <div style={{ flex: 1 }}>\r\n                  <h4 style={{ margin: '0 0 10px 0' }}>Write a Review</h4>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={reviewName}\r\n                    onChange={(e) => setReviewName(e.target.value)}\r\n                    placeholder=\"Your name...\"\r\n                    aria-label=\"Review name\"\r\n                    style={{ width: '100%', marginBottom: '5px', padding: '5px' }}\r\n                  />\r\n                  <input\r\n                    type=\"email\"\r\n                    value={reviewEmail}\r\n                    onChange={(e) => setReviewEmail(e.target.value)}\r\n                    placeholder=\"Your email...\"\r\n                    aria-label=\"Review email\"\r\n                    style={{ width: '100%', marginBottom: '5px', padding: '5px' }}\r\n                  />\r\n                  <input\r\n                    type=\"text\"\r\n                    value={reviewText}\r\n                    onChange={(e) => setReviewText(e.target.value)}\r\n                    placeholder=\"Write your review...\"\r\n                    aria-label=\"Review text\"\r\n                    style={{ width: '100%', marginBottom: '5px', padding: '5px' }}\r\n                  />\r\n                  <button\r\n                    className=\"cta-button\"\r\n                    onClick={handleSubmitReview}\r\n                    aria-label=\"Submit review\"\r\n                    style={{ padding: '5px 10px', fontSize: '14px' }}\r\n                  >\r\n                    Submit Review\r\n                  </button>\r\n                  {error && <p className=\"error-message\" style={{ color: 'red', marginTop: '5px' }}>{error}</p>}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      <footer className=\"details-footer\">\r\n        <p> 2025 MovieVerse. All rights reserved.</p>\r\n        <div className=\"footer-links\">\r\n          <Link to=\"/\">Home</Link>\r\n          <Link to=\"/privacy\">Privacy</Link>\r\n          <Link to=\"/terms\">Terms</Link>\r\n        </div>\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MovieDetails;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}