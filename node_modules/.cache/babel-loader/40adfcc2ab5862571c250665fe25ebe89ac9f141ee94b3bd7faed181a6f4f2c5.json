{"ast":null,"code":"import _objectSpread from\"C:/Users/hp/Desktop/new/project/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState,useEffect}from'react';import{useParams,Link,useNavigate}from'react-router-dom';import{Helmet}from'react-helmet';import LazyLoad from'react-lazyload';import{getMovieDetails,getReviews,submitReview,submitReply,submitReaction}from'../api/api';import'../styles.css';// Utility to format timestamp like YouTube (e.g., \"2 days ago\")\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const formatTimestamp=date=>{const now=new Date();const diffMs=now-new Date(date);const diffSeconds=Math.floor(diffMs/1000);const diffMinutes=Math.floor(diffSeconds/60);const diffHours=Math.floor(diffMinutes/60);const diffDays=Math.floor(diffHours/24);if(diffDays>0)return\"\".concat(diffDays,\" day\").concat(diffDays>1?'s':'',\" ago\");if(diffHours>0)return\"\".concat(diffHours,\" hour\").concat(diffHours>1?'s':'',\" ago\");if(diffMinutes>0)return\"\".concat(diffMinutes,\" minute\").concat(diffMinutes>1?'s':'',\" ago\");return'Just now';};// Email validation regex\nconst emailRegex=/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;function MovieDetails(){var _movie$watchProviders,_movie$watchProviders2,_movie$watchProviders3;const{source,externalId}=useParams();const navigate=useNavigate();const[movie,setMovie]=useState(null);const[reviews,setReviews]=useState([]);const[error,setError]=useState(null);const[loading,setLoading]=useState(true);const[reviewText,setReviewText]=useState('');const[reviewName,setReviewName]=useState('');const[reviewEmail,setReviewEmail]=useState('');const[watchlist,setWatchlist]=useState(JSON.parse(localStorage.getItem('watchlist'))||[]);const[selectedTrailer,setSelectedTrailer]=useState(null);const[reactionCounts,setReactionCounts]=useState({excellent:0,loved:0,thanks:0,wow:0,sad:0});const[replyingTo,setReplyingTo]=useState(null);const[replyText,setReplyText]=useState('');const[replyName,setReplyName]=useState('');const[replyEmail,setReplyEmail]=useState('');useEffect(()=>{let isMounted=true;const fetchData=async()=>{try{var _movieResponse$data;console.log('Fetching movie details...');const[movieResponse,reviewsResponse]=await Promise.all([getMovieDetails(source,externalId),getReviews(source,externalId)]);if(!isMounted)return;if(!((_movieResponse$data=movieResponse.data)!==null&&_movieResponse$data!==void 0&&_movieResponse$data.externalId)){throw new Error('Invalid movie data received');}setMovie(movieResponse.data);setReviews(Array.isArray(reviewsResponse.data)?reviewsResponse.data:[]);setReactionCounts(movieResponse.data.reactionCounts||{excellent:0,loved:0,thanks:0,wow:0,sad:0});setError(null);}catch(err){var _err$response;console.error('Data loading error:',{message:err.message,response:(_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.data,stack:err.stack});if(isMounted){var _err$response2,_err$response2$data;setError(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.msg)||'Failed to load movie details');}}finally{if(isMounted)setLoading(false);}};fetchData();return()=>{isMounted=false;};},[source,externalId]);const handleAddToWatchlist=movie=>{if(!movie.source||!movie.externalId||movie.externalId==='undefined'){console.warn('Cannot add movie to watchlist, invalid data:',movie);return;}const newWatchlist=[...watchlist,_objectSpread(_objectSpread({},movie),{},{source:movie.source,externalId:movie.externalId})];setWatchlist(newWatchlist);localStorage.setItem('watchlist',JSON.stringify(newWatchlist));};const handleRemoveFromWatchlist=(externalId,source)=>{const newWatchlist=watchlist.filter(m=>!(m.externalId===externalId&&m.source===source));setWatchlist(newWatchlist);localStorage.setItem('watchlist',JSON.stringify(newWatchlist));};const handleImageError=(e,title)=>{console.log(\"Image failed to load for \".concat(title,\": \").concat(e.target.src));e.target.src='https://placehold.co/300x450?text=No+Poster';};const openTrailerModal=trailerUrl=>{if(trailerUrl&&trailerUrl!=='N/A'){setSelectedTrailer(trailerUrl);}};const closeTrailerModal=()=>{setSelectedTrailer(null);};const handleSubmitReview=async e=>{e.preventDefault();if(!reviewText.trim()||!reviewName.trim()||!reviewEmail.trim()){setError('Please fill all fields (name, email, review).');return;}if(!emailRegex.test(reviewEmail)){setError('Please enter a valid email address (e.g., user@example.com).');return;}try{await submitReview(source,externalId,{text:reviewText,name:reviewName,email:reviewEmail});const reviewsResponse=await getReviews(source,externalId);setReviews(Array.isArray(reviewsResponse.data)?reviewsResponse.data:[]);setReviewText('');setReviewName('');setReviewEmail('');setError(null);}catch(err){var _err$response3,_err$response3$data;setError(((_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.msg)||'Failed to submit review. Check console for details.');}};const handleReaction=async reaction=>{try{const response=await submitReaction(source,externalId,reaction);setReactionCounts(response.data.reactionCounts);setError(null);}catch(err){setError('Failed to submit reaction. Check console for details.');}};const handleReply=async reviewId=>{if(!replyText.trim()||!replyName.trim()||!replyEmail.trim()){setError('Please fill all fields (name, email, reply).');return;}if(!emailRegex.test(replyEmail)){setError('Please enter a valid email address (e.g., user@example.com).');return;}try{const response=await submitReply(source,externalId,reviewId,{text:replyText,name:replyName,email:replyEmail});setReviews(prev=>prev.map(review=>review._id===reviewId?response.data:review));setReplyText('');setReplyName('');setReplyEmail('');setReplyingTo(null);setError(null);}catch(err){var _err$response4,_err$response4$data;setError(((_err$response4=err.response)===null||_err$response4===void 0?void 0:(_err$response4$data=_err$response4.data)===null||_err$response4$data===void 0?void 0:_err$response4$data.msg)||'Failed to submit reply. Check console for details.');}};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"loading-screen\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading movie details...\"})]});}if(error&&!movie){return/*#__PURE__*/_jsxs(\"div\",{className:\"error-screen\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Oops! Something went wrong\"}),/*#__PURE__*/_jsx(\"p\",{children:error}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"home-link\",children:/*#__PURE__*/_jsx(\"button\",{className:\"cta-button\",children:\"Return to Home\"})})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"movie-details fade-in\",children:[/*#__PURE__*/_jsxs(Helmet,{children:[/*#__PURE__*/_jsx(\"title\",{children:movie!==null&&movie!==void 0&&movie.title?\"\".concat(movie.title,\" - MovieVerse\"):'Movie Details - MovieVerse'}),/*#__PURE__*/_jsx(\"meta\",{name:\"description\",content:(movie===null||movie===void 0?void 0:movie.overview)||'View movie details on MovieVerse'})]}),selectedTrailer&&/*#__PURE__*/_jsx(\"div\",{className:\"trailer-modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"trailer-modal-content\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"trailer-modal-close\",onClick:closeTrailerModal,\"aria-label\":\"Close trailer modal\",children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"iframe\",{width:\"100%\",height:\"100%\",src:selectedTrailer.replace('watch?v=','embed/'),title:\"Movie Trailer\",frameBorder:\"0\",allow:\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\",allowFullScreen:true})]})}),/*#__PURE__*/_jsx(\"header\",{className:\"details-header\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"home-link\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"logo\",children:\"MovieVerse\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"movie-content\",children:movie&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:movie.title||'Untitled Movie'}),/*#__PURE__*/_jsx(\"div\",{className:\"movie-poster\",children:/*#__PURE__*/_jsx(LazyLoad,{height:450,children:/*#__PURE__*/_jsx(\"img\",{src:movie.poster||'https://placehold.co/300x450?text=No+Poster',alt:movie.title||'Movie Poster',onError:e=>handleImageError(e,movie.title||'Unknown')})})}),movie.screenshots&&movie.screenshots.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"category-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Screenshots\"}),/*#__PURE__*/_jsx(\"div\",{className:\"movie-grid horizontal-scroll\",children:movie.screenshots.map((screenshot,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"movie-card\",children:/*#__PURE__*/_jsx(\"div\",{className:\"movie-poster\",children:/*#__PURE__*/_jsx(LazyLoad,{height:300,children:/*#__PURE__*/_jsx(\"img\",{src:screenshot||'https://placehold.co/200x300?text=No+Screenshot',alt:\"\".concat(movie.title,\" Screenshot \").concat(index+1),onError:e=>handleImageError(e,\"\".concat(movie.title,\" Screenshot \").concat(index+1)),style:{width:'200px',height:'300px',objectFit:'cover'}})})})},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"storyline\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Storyline\"}),/*#__PURE__*/_jsx(\"p\",{children:movie.overview||'No storyline available.'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"download-links\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Watch Options\"}),movie.directLink?/*#__PURE__*/_jsx(\"ul\",{children:/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:movie.directLink,target:\"_blank\",rel:\"noopener noreferrer\",children:\"Watch Now on Internet Archive\"})})}):((_movie$watchProviders=movie.watchProviders)===null||_movie$watchProviders===void 0?void 0:(_movie$watchProviders2=_movie$watchProviders.US)===null||_movie$watchProviders2===void 0?void 0:(_movie$watchProviders3=_movie$watchProviders2.ads)===null||_movie$watchProviders3===void 0?void 0:_movie$watchProviders3.length)>0?/*#__PURE__*/_jsx(\"ul\",{children:movie.watchProviders.US.ads.map((provider,index)=>/*#__PURE__*/_jsx(\"li\",{children:provider.provider_name},index))}):/*#__PURE__*/_jsx(\"p\",{children:\"No watch options available.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"reactions\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Reactions\"}),/*#__PURE__*/_jsx(\"div\",{className:\"reaction-buttons\",children:Object.keys(reactionCounts).map(reaction=>/*#__PURE__*/_jsxs(\"button\",{className:\"reaction-btn\",onClick:()=>handleReaction(reaction),\"aria-label\":\"React with \".concat(reaction),style:{margin:'0 5px',padding:'5px 10px',fontSize:'14px'},children:[reaction.charAt(0).toUpperCase()+reaction.slice(1),\" (\",reactionCounts[reaction],\")\"]},reaction))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"hero-buttons\",children:[movie.trailer&&movie.trailer!=='N/A'&&/*#__PURE__*/_jsx(\"button\",{className:\"cta-button hero-button play-trailer\",onClick:()=>openTrailerModal(movie.trailer),\"aria-label\":\"Play trailer for \".concat(movie.title),children:\"Play Trailer\"}),watchlist.some(m=>m.externalId===externalId&&m.source===source)?/*#__PURE__*/_jsx(\"button\",{className:\"cta-button hero-button\",onClick:()=>handleRemoveFromWatchlist(externalId,source),\"aria-label\":\"Remove \".concat(movie.title,\" from watchlist\"),children:\"Remove from Watchlist\"}):/*#__PURE__*/_jsx(\"button\",{className:\"cta-button hero-button\",onClick:()=>handleAddToWatchlist(movie),\"aria-label\":\"Add \".concat(movie.title,\" to watchlist\"),children:\"Add to Watchlist\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"reviews-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Reviews\"}),reviews.length>0?reviews.map(review=>{var _review$user,_review$replies;return/*#__PURE__*/_jsxs(\"div\",{className:\"comment-item\",style:{display:'flex',marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"img\",{src:((_review$user=review.user)===null||_review$user===void 0?void 0:_review$user.avatar)||'https://placehold.co/40x40?text=User',alt:\"User avatar\",className:\"comment-avatar\",style:{width:'40px',height:'40px',borderRadius:'50%',marginRight:'10px'}}),/*#__PURE__*/_jsxs(\"div\",{className:\"comment-content\",style:{flex:1},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',marginBottom:'5px'},children:[/*#__PURE__*/_jsx(\"p\",{className:\"comment-username\",style:{fontWeight:'bold',margin:'0',marginRight:'5px'},children:review.name||'Anonymous'}),/*#__PURE__*/_jsx(\"span\",{style:{color:'#666',fontSize:'12px',marginRight:'5px'},children:\"\\u2022\"}),/*#__PURE__*/_jsx(\"p\",{className:\"comment-time\",style:{color:'#666',fontSize:'12px',margin:'0'},children:formatTimestamp(review.createdAt)})]}),/*#__PURE__*/_jsx(\"p\",{className:\"comment-text\",style:{margin:'0 0 5px 0'},children:review.text}),/*#__PURE__*/_jsx(\"button\",{className:\"reply-btn\",onClick:()=>setReplyingTo(review._id===replyingTo?null:review._id),\"aria-label\":\"Reply to \".concat(review.name||'Anonymous'),style:{color:'#1a73e8',background:'none',border:'none',cursor:'pointer',padding:'0',fontSize:'14px'},children:\"Reply\"}),replyingTo===review._id&&/*#__PURE__*/_jsxs(\"div\",{className:\"reply-form\",style:{marginTop:'10px',display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://placehold.co/40x40?text=User\",alt:\"User avatar\",style:{width:'40px',height:'40px',borderRadius:'50%',marginRight:'10px'}}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:replyName,onChange:e=>setReplyName(e.target.value),placeholder:\"Your name...\",\"aria-label\":\"Reply name\",style:{width:'100%',marginBottom:'5px',padding:'5px'}}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:replyEmail,onChange:e=>setReplyEmail(e.target.value),placeholder:\"Your email...\",\"aria-label\":\"Reply email\",style:{width:'100%',marginBottom:'5px',padding:'5px'}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:replyText,onChange:e=>setReplyText(e.target.value),placeholder:\"Write a reply...\",\"aria-label\":\"Reply text\",style:{width:'100%',marginBottom:'5px',padding:'5px'}}),/*#__PURE__*/_jsx(\"button\",{className:\"cta-button\",onClick:()=>handleReply(review._id),\"aria-label\":\"Submit reply\",style:{padding:'5px 10px',fontSize:'14px'},children:\"Submit Reply\"})]})]}),((_review$replies=review.replies)===null||_review$replies===void 0?void 0:_review$replies.length)>0&&/*#__PURE__*/_jsx(\"div\",{className:\"replies-container\",style:{marginTop:'10px',marginLeft:'50px'},children:review.replies.map(reply=>{var _reply$user;return/*#__PURE__*/_jsxs(\"div\",{className:\"reply-item\",style:{display:'flex',marginBottom:'10px'},children:[/*#__PURE__*/_jsx(\"img\",{src:((_reply$user=reply.user)===null||_reply$user===void 0?void 0:_reply$user.avatar)||'https://placehold.co/30x30?text=User',alt:\"User avatar\",className:\"comment-avatar\",style:{width:'30px',height:'30px',borderRadius:'50%',marginRight:'10px'}}),/*#__PURE__*/_jsxs(\"div\",{className:\"comment-content\",style:{flex:1},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',marginBottom:'5px'},children:[/*#__PURE__*/_jsx(\"p\",{className:\"comment-username\",style:{fontWeight:'bold',margin:'0',marginRight:'5px'},children:reply.name||'Anonymous'}),/*#__PURE__*/_jsx(\"span\",{style:{color:'#666',fontSize:'12px',marginRight:'5px'},children:\"\\u2022\"}),/*#__PURE__*/_jsx(\"p\",{className:\"comment-time\",style:{color:'#666',fontSize:'12px',margin:'0'},children:formatTimestamp(reply.createdAt)})]}),/*#__PURE__*/_jsx(\"p\",{className:\"comment-text\",style:{margin:'0'},children:reply.text})]})]},reply._id);})})]})]},review._id);}):/*#__PURE__*/_jsx(\"p\",{children:\"No reviews yet. Be the first to review!\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"review-form\",style:{marginTop:'20px',display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://placehold.co/40x40?text=User\",alt:\"User avatar\",style:{width:'40px',height:'40px',borderRadius:'50%',marginRight:'10px'}}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"h4\",{style:{margin:'0 0 10px 0'},children:\"Write a Review\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:reviewName,onChange:e=>setReviewName(e.target.value),placeholder:\"Your name...\",\"aria-label\":\"Review name\",style:{width:'100%',marginBottom:'5px',padding:'5px'}}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:reviewEmail,onChange:e=>setReviewEmail(e.target.value),placeholder:\"Your email...\",\"aria-label\":\"Review email\",style:{width:'100%',marginBottom:'5px',padding:'5px'}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:reviewText,onChange:e=>setReviewText(e.target.value),placeholder:\"Write your review...\",\"aria-label\":\"Review text\",style:{width:'100%',marginBottom:'5px',padding:'5px'}}),/*#__PURE__*/_jsx(\"button\",{className:\"cta-button\",onClick:handleSubmitReview,\"aria-label\":\"Submit review\",style:{padding:'5px 10px',fontSize:'14px'},children:\"Submit Review\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",style:{color:'red',marginTop:'5px'},children:error})]})]})]})]})}),/*#__PURE__*/_jsxs(\"footer\",{className:\"details-footer\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\xA9 2025 MovieVerse. All rights reserved.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"footer-links\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Home\"}),/*#__PURE__*/_jsx(Link,{to:\"/privacy\",children:\"Privacy\"}),/*#__PURE__*/_jsx(Link,{to:\"/terms\",children:\"Terms\"})]})]})]});}export default MovieDetails;","map":{"version":3,"names":["useState","useEffect","useParams","Link","useNavigate","Helmet","LazyLoad","getMovieDetails","getReviews","submitReview","submitReply","submitReaction","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","formatTimestamp","date","now","Date","diffMs","diffSeconds","Math","floor","diffMinutes","diffHours","diffDays","concat","emailRegex","MovieDetails","_movie$watchProviders","_movie$watchProviders2","_movie$watchProviders3","source","externalId","navigate","movie","setMovie","reviews","setReviews","error","setError","loading","setLoading","reviewText","setReviewText","reviewName","setReviewName","reviewEmail","setReviewEmail","watchlist","setWatchlist","JSON","parse","localStorage","getItem","selectedTrailer","setSelectedTrailer","reactionCounts","setReactionCounts","excellent","loved","thanks","wow","sad","replyingTo","setReplyingTo","replyText","setReplyText","replyName","setReplyName","replyEmail","setReplyEmail","isMounted","fetchData","_movieResponse$data","console","log","movieResponse","reviewsResponse","Promise","all","data","Error","Array","isArray","err","_err$response","message","response","stack","_err$response2","_err$response2$data","msg","handleAddToWatchlist","warn","newWatchlist","_objectSpread","setItem","stringify","handleRemoveFromWatchlist","filter","m","handleImageError","e","title","target","src","openTrailerModal","trailerUrl","closeTrailerModal","handleSubmitReview","preventDefault","trim","test","text","name","email","_err$response3","_err$response3$data","handleReaction","reaction","handleReply","reviewId","prev","map","review","_id","_err$response4","_err$response4$data","className","children","to","content","overview","onClick","width","height","replace","frameBorder","allow","allowFullScreen","poster","alt","onError","screenshots","length","screenshot","index","style","objectFit","directLink","href","rel","watchProviders","US","ads","provider","provider_name","Object","keys","margin","padding","fontSize","charAt","toUpperCase","slice","trailer","some","_review$user","_review$replies","display","marginBottom","user","avatar","borderRadius","marginRight","flex","alignItems","fontWeight","color","createdAt","background","border","cursor","marginTop","type","value","onChange","placeholder","replies","marginLeft","reply","_reply$user"],"sources":["C:/Users/hp/Desktop/new/project/frontend/src/components/MovieDetails.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useParams, Link, useNavigate } from 'react-router-dom';\r\nimport { Helmet } from 'react-helmet';\r\nimport LazyLoad from 'react-lazyload';\r\nimport { getMovieDetails, getReviews, submitReview, submitReply, submitReaction } from '../api/api';\r\nimport '../styles.css';\r\n\r\n// Utility to format timestamp like YouTube (e.g., \"2 days ago\")\r\nconst formatTimestamp = (date) => {\r\n  const now = new Date();\r\n  const diffMs = now - new Date(date);\r\n  const diffSeconds = Math.floor(diffMs / 1000);\r\n  const diffMinutes = Math.floor(diffSeconds / 60);\r\n  const diffHours = Math.floor(diffMinutes / 60);\r\n  const diffDays = Math.floor(diffHours / 24);\r\n\r\n  if (diffDays > 0) return `${diffDays} day${diffDays > 1 ? 's' : ''} ago`;\r\n  if (diffHours > 0) return `${diffHours} hour${diffHours > 1 ? 's' : ''} ago`;\r\n  if (diffMinutes > 0) return `${diffMinutes} minute${diffMinutes > 1 ? 's' : ''} ago`;\r\n  return 'Just now';\r\n};\r\n\r\n// Email validation regex\r\nconst emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n\r\nfunction MovieDetails() {\r\n  const { source, externalId } = useParams();\r\n  const navigate = useNavigate();\r\n  const [movie, setMovie] = useState(null);\r\n  const [reviews, setReviews] = useState([]);\r\n  const [error, setError] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [reviewText, setReviewText] = useState('');\r\n  const [reviewName, setReviewName] = useState('');\r\n  const [reviewEmail, setReviewEmail] = useState('');\r\n  const [watchlist, setWatchlist] = useState(JSON.parse(localStorage.getItem('watchlist')) || []);\r\n  const [selectedTrailer, setSelectedTrailer] = useState(null);\r\n  const [reactionCounts, setReactionCounts] = useState({ excellent: 0, loved: 0, thanks: 0, wow: 0, sad: 0 });\r\n  const [replyingTo, setReplyingTo] = useState(null);\r\n  const [replyText, setReplyText] = useState('');\r\n  const [replyName, setReplyName] = useState('');\r\n  const [replyEmail, setReplyEmail] = useState('');\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n\r\n    const fetchData = async () => {\r\n      try {\r\n        console.log('Fetching movie details...');\r\n        const [movieResponse, reviewsResponse] = await Promise.all([\r\n          getMovieDetails(source, externalId),\r\n          getReviews(source, externalId),\r\n        ]);\r\n\r\n        if (!isMounted) return;\r\n\r\n        if (!movieResponse.data?.externalId) {\r\n          throw new Error('Invalid movie data received');\r\n        }\r\n\r\n        setMovie(movieResponse.data);\r\n        setReviews(Array.isArray(reviewsResponse.data) ? reviewsResponse.data : []);\r\n        setReactionCounts(\r\n          movieResponse.data.reactionCounts || { excellent: 0, loved: 0, thanks: 0, wow: 0, sad: 0 }\r\n        );\r\n        setError(null);\r\n      } catch (err) {\r\n        console.error('Data loading error:', {\r\n          message: err.message,\r\n          response: err.response?.data,\r\n          stack: err.stack,\r\n        });\r\n        if (isMounted) {\r\n          setError(err.response?.data?.msg || 'Failed to load movie details');\r\n        }\r\n      } finally {\r\n        if (isMounted) setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, [source, externalId]);\r\n\r\n  const handleAddToWatchlist = (movie) => {\r\n    if (!movie.source || !movie.externalId || movie.externalId === 'undefined') {\r\n      console.warn('Cannot add movie to watchlist, invalid data:', movie);\r\n      return;\r\n    }\r\n    const newWatchlist = [...watchlist, { ...movie, source: movie.source, externalId: movie.externalId }];\r\n    setWatchlist(newWatchlist);\r\n    localStorage.setItem('watchlist', JSON.stringify(newWatchlist));\r\n  };\r\n\r\n  const handleRemoveFromWatchlist = (externalId, source) => {\r\n    const newWatchlist = watchlist.filter((m) => !(m.externalId === externalId && m.source === source));\r\n    setWatchlist(newWatchlist);\r\n    localStorage.setItem('watchlist', JSON.stringify(newWatchlist));\r\n  };\r\n\r\n  const handleImageError = (e, title) => {\r\n    console.log(`Image failed to load for ${title}: ${e.target.src}`);\r\n    e.target.src = 'https://placehold.co/300x450?text=No+Poster';\r\n  };\r\n\r\n  const openTrailerModal = (trailerUrl) => {\r\n    if (trailerUrl && trailerUrl !== 'N/A') {\r\n      setSelectedTrailer(trailerUrl);\r\n    }\r\n  };\r\n\r\n  const closeTrailerModal = () => {\r\n    setSelectedTrailer(null);\r\n  };\r\n\r\n  const handleSubmitReview = async (e) => {\r\n    e.preventDefault();\r\n    if (!reviewText.trim() || !reviewName.trim() || !reviewEmail.trim()) {\r\n      setError('Please fill all fields (name, email, review).');\r\n      return;\r\n    }\r\n    if (!emailRegex.test(reviewEmail)) {\r\n      setError('Please enter a valid email address (e.g., user@example.com).');\r\n      return;\r\n    }\r\n    try {\r\n      await submitReview(source, externalId, { text: reviewText, name: reviewName, email: reviewEmail });\r\n      const reviewsResponse = await getReviews(source, externalId);\r\n      setReviews(Array.isArray(reviewsResponse.data) ? reviewsResponse.data : []);\r\n      setReviewText('');\r\n      setReviewName('');\r\n      setReviewEmail('');\r\n      setError(null);\r\n    } catch (err) {\r\n      setError(err.response?.data?.msg || 'Failed to submit review. Check console for details.');\r\n    }\r\n  };\r\n\r\n  const handleReaction = async (reaction) => {\r\n    try {\r\n      const response = await submitReaction(source, externalId, reaction);\r\n      setReactionCounts(response.data.reactionCounts);\r\n      setError(null);\r\n    } catch (err) {\r\n      setError('Failed to submit reaction. Check console for details.');\r\n    }\r\n  };\r\n\r\n  const handleReply = async (reviewId) => {\r\n    if (!replyText.trim() || !replyName.trim() || !replyEmail.trim()) {\r\n      setError('Please fill all fields (name, email, reply).');\r\n      return;\r\n    }\r\n    if (!emailRegex.test(replyEmail)) {\r\n      setError('Please enter a valid email address (e.g., user@example.com).');\r\n      return;\r\n    }\r\n    try {\r\n      const response = await submitReply(source, externalId, reviewId, {\r\n        text: replyText,\r\n        name: replyName,\r\n        email: replyEmail,\r\n      });\r\n      setReviews((prev) =>\r\n        prev.map((review) => (review._id === reviewId ? response.data : review))\r\n      );\r\n      setReplyText('');\r\n      setReplyName('');\r\n      setReplyEmail('');\r\n      setReplyingTo(null);\r\n      setError(null);\r\n    } catch (err) {\r\n      setError(err.response?.data?.msg || 'Failed to submit reply. Check console for details.');\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"loading-screen\">\r\n        <div className=\"spinner\"></div>\r\n        <p>Loading movie details...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error && !movie) {\r\n    return (\r\n      <div className=\"error-screen\">\r\n        <h2>Oops! Something went wrong</h2>\r\n        <p>{error}</p>\r\n        <Link to=\"/\" className=\"home-link\">\r\n          <button className=\"cta-button\">Return to Home</button>\r\n        </Link>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"movie-details fade-in\">\r\n      <Helmet>\r\n        <title>{movie?.title ? `${movie.title} - MovieVerse` : 'Movie Details - MovieVerse'}</title>\r\n        <meta name=\"description\" content={movie?.overview || 'View movie details on MovieVerse'} />\r\n      </Helmet>\r\n\r\n      {selectedTrailer && (\r\n        <div className=\"trailer-modal\">\r\n          <div className=\"trailer-modal-content\">\r\n            <button className=\"trailer-modal-close\" onClick={closeTrailerModal} aria-label=\"Close trailer modal\">\r\n              ×\r\n            </button>\r\n            <iframe\r\n              width=\"100%\"\r\n              height=\"100%\"\r\n              src={selectedTrailer.replace('watch?v=', 'embed/')}\r\n              title=\"Movie Trailer\"\r\n              frameBorder=\"0\"\r\n              allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n              allowFullScreen\r\n            ></iframe>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <header className=\"details-header\">\r\n        <Link to=\"/\" className=\"home-link\">\r\n          <h1 className=\"logo\">MovieVerse</h1>\r\n        </Link>\r\n      </header>\r\n\r\n      <div className=\"movie-content\">\r\n        {movie && (\r\n          <>\r\n            <h1>{movie.title || 'Untitled Movie'}</h1>\r\n            <div className=\"movie-poster\">\r\n              <LazyLoad height={450}>\r\n                <img\r\n                  src={movie.poster || 'https://placehold.co/300x450?text=No+Poster'}\r\n                  alt={movie.title || 'Movie Poster'}\r\n                  onError={(e) => handleImageError(e, movie.title || 'Unknown')}\r\n                />\r\n              </LazyLoad>\r\n            </div>\r\n\r\n            {movie.screenshots && movie.screenshots.length > 0 && (\r\n              <div className=\"category-section\">\r\n                <h2>Screenshots</h2>\r\n                <div className=\"movie-grid horizontal-scroll\">\r\n                  {movie.screenshots.map((screenshot, index) => (\r\n                    <div key={index} className=\"movie-card\">\r\n                      <div className=\"movie-poster\">\r\n                        <LazyLoad height={300}>\r\n                          <img\r\n                            src={screenshot || 'https://placehold.co/200x300?text=No+Screenshot'}\r\n                            alt={`${movie.title} Screenshot ${index + 1}`}\r\n                            onError={(e) => handleImageError(e, `${movie.title} Screenshot ${index + 1}`)}\r\n                            style={{ width: '200px', height: '300px', objectFit: 'cover' }}\r\n                          />\r\n                        </LazyLoad>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"storyline\">\r\n              <h2>Storyline</h2>\r\n              <p>{movie.overview || 'No storyline available.'}</p>\r\n            </div>\r\n\r\n            <div className=\"download-links\">\r\n              <h2>Watch Options</h2>\r\n              {movie.directLink ? (\r\n                <ul>\r\n                  <li>\r\n                    <a href={movie.directLink} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                      Watch Now on Internet Archive\r\n                    </a>\r\n                  </li>\r\n                </ul>\r\n              ) : movie.watchProviders?.US?.ads?.length > 0 ? (\r\n                <ul>\r\n                  {movie.watchProviders.US.ads.map((provider, index) => (\r\n                    <li key={index}>{provider.provider_name}</li>\r\n                  ))}\r\n                </ul>\r\n              ) : (\r\n                <p>No watch options available.</p>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"reactions\">\r\n              <h2>Reactions</h2>\r\n              <div className=\"reaction-buttons\">\r\n                {Object.keys(reactionCounts).map((reaction) => (\r\n                  <button\r\n                    key={reaction}\r\n                    className=\"reaction-btn\"\r\n                    onClick={() => handleReaction(reaction)}\r\n                    aria-label={`React with ${reaction}`}\r\n                    style={{ margin: '0 5px', padding: '5px 10px', fontSize: '14px' }}\r\n                  >\r\n                    {reaction.charAt(0).toUpperCase() + reaction.slice(1)} ({reactionCounts[reaction]})\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"hero-buttons\">\r\n              {movie.trailer && movie.trailer !== 'N/A' && (\r\n                <button\r\n                  className=\"cta-button hero-button play-trailer\"\r\n                  onClick={() => openTrailerModal(movie.trailer)}\r\n                  aria-label={`Play trailer for ${movie.title}`}\r\n                >\r\n                  Play Trailer\r\n                </button>\r\n              )}\r\n              {watchlist.some((m) => m.externalId === externalId && m.source === source) ? (\r\n                <button\r\n                  className=\"cta-button hero-button\"\r\n                  onClick={() => handleRemoveFromWatchlist(externalId, source)}\r\n                  aria-label={`Remove ${movie.title} from watchlist`}\r\n                >\r\n                  Remove from Watchlist\r\n                </button>\r\n              ) : (\r\n                <button\r\n                  className=\"cta-button hero-button\"\r\n                  onClick={() => handleAddToWatchlist(movie)}\r\n                  aria-label={`Add ${movie.title} to watchlist`}\r\n                >\r\n                  Add to Watchlist\r\n                </button>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"reviews-section\">\r\n              <h3>Reviews</h3>\r\n              {reviews.length > 0 ? (\r\n                reviews.map((review) => (\r\n                  <div key={review._id} className=\"comment-item\" style={{ display: 'flex', marginBottom: '15px' }}>\r\n                    <img\r\n                      src={review.user?.avatar || 'https://placehold.co/40x40?text=User'}\r\n                      alt=\"User avatar\"\r\n                      className=\"comment-avatar\"\r\n                      style={{ width: '40px', height: '40px', borderRadius: '50%', marginRight: '10px' }}\r\n                    />\r\n                    <div className=\"comment-content\" style={{ flex: 1 }}>\r\n                      <div style={{ display: 'flex', alignItems: 'center', marginBottom: '5px' }}>\r\n                        <p className=\"comment-username\" style={{ fontWeight: 'bold', margin: '0', marginRight: '5px' }}>\r\n                          {review.name || 'Anonymous'}\r\n                        </p>\r\n                        <span style={{ color: '#666', fontSize: '12px', marginRight: '5px' }}>•</span>\r\n                        <p className=\"comment-time\" style={{ color: '#666', fontSize: '12px', margin: '0' }}>\r\n                          {formatTimestamp(review.createdAt)}\r\n                        </p>\r\n                      </div>\r\n                      <p className=\"comment-text\" style={{ margin: '0 0 5px 0' }}>{review.text}</p>\r\n                      <button\r\n                        className=\"reply-btn\"\r\n                        onClick={() => setReplyingTo(review._id === replyingTo ? null : review._id)}\r\n                        aria-label={`Reply to ${review.name || 'Anonymous'}`}\r\n                        style={{ color: '#1a73e8', background: 'none', border: 'none', cursor: 'pointer', padding: '0', fontSize: '14px' }}\r\n                      >\r\n                        Reply\r\n                      </button>\r\n                      {replyingTo === review._id && (\r\n                        <div className=\"reply-form\" style={{ marginTop: '10px', display: 'flex', alignItems: 'center' }}>\r\n                          <img\r\n                            src=\"https://placehold.co/40x40?text=User\"\r\n                            alt=\"User avatar\"\r\n                            style={{ width: '40px', height: '40px', borderRadius: '50%', marginRight: '10px' }}\r\n                          />\r\n                          <div style={{ flex: 1 }}>\r\n                            <input\r\n                              type=\"text\"\r\n                              value={replyName}\r\n                              onChange={(e) => setReplyName(e.target.value)}\r\n                              placeholder=\"Your name...\"\r\n                              aria-label=\"Reply name\"\r\n                              style={{ width: '100%', marginBottom: '5px', padding: '5px' }}\r\n                            />\r\n                            <input\r\n                              type=\"email\"\r\n                              value={replyEmail}\r\n                              onChange={(e) => setReplyEmail(e.target.value)}\r\n                              placeholder=\"Your email...\"\r\n                              aria-label=\"Reply email\"\r\n                              style={{ width: '100%', marginBottom: '5px', padding: '5px' }}\r\n                            />\r\n                            <input\r\n                              type=\"text\"\r\n                              value={replyText}\r\n                              onChange={(e) => setReplyText(e.target.value)}\r\n                              placeholder=\"Write a reply...\"\r\n                              aria-label=\"Reply text\"\r\n                              style={{ width: '100%', marginBottom: '5px', padding: '5px' }}\r\n                            />\r\n                            <button\r\n                              className=\"cta-button\"\r\n                              onClick={() => handleReply(review._id)}\r\n                              aria-label=\"Submit reply\"\r\n                              style={{ padding: '5px 10px', fontSize: '14px' }}\r\n                            >\r\n                              Submit Reply\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                      {review.replies?.length > 0 && (\r\n                        <div className=\"replies-container\" style={{ marginTop: '10px', marginLeft: '50px' }}>\r\n                          {review.replies.map((reply) => (\r\n                            <div key={reply._id} className=\"reply-item\" style={{ display: 'flex', marginBottom: '10px' }}>\r\n                              <img\r\n                                src={reply.user?.avatar || 'https://placehold.co/30x30?text=User'}\r\n                                alt=\"User avatar\"\r\n                                className=\"comment-avatar\"\r\n                                style={{ width: '30px', height: '30px', borderRadius: '50%', marginRight: '10px' }}\r\n                              />\r\n                              <div className=\"comment-content\" style={{ flex: 1 }}>\r\n                                <div style={{ display: 'flex', alignItems: 'center', marginBottom: '5px' }}>\r\n                                  <p className=\"comment-username\" style={{ fontWeight: 'bold', margin: '0', marginRight: '5px' }}>\r\n                                    {reply.name || 'Anonymous'}\r\n                                  </p>\r\n                                  <span style={{ color: '#666', fontSize: '12px', marginRight: '5px' }}>•</span>\r\n                                  <p className=\"comment-time\" style={{ color: '#666', fontSize: '12px', margin: '0' }}>\r\n                                    {formatTimestamp(reply.createdAt)}\r\n                                  </p>\r\n                                </div>\r\n                                <p className=\"comment-text\" style={{ margin: '0' }}>{reply.text}</p>\r\n                              </div>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                ))\r\n              ) : (\r\n                <p>No reviews yet. Be the first to review!</p>\r\n              )}\r\n\r\n              <div className=\"review-form\" style={{ marginTop: '20px', display: 'flex', alignItems: 'center' }}>\r\n                <img\r\n                  src=\"https://placehold.co/40x40?text=User\"\r\n                  alt=\"User avatar\"\r\n                  style={{ width: '40px', height: '40px', borderRadius: '50%', marginRight: '10px' }}\r\n                />\r\n                <div style={{ flex: 1 }}>\r\n                  <h4 style={{ margin: '0 0 10px 0' }}>Write a Review</h4>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={reviewName}\r\n                    onChange={(e) => setReviewName(e.target.value)}\r\n                    placeholder=\"Your name...\"\r\n                    aria-label=\"Review name\"\r\n                    style={{ width: '100%', marginBottom: '5px', padding: '5px' }}\r\n                  />\r\n                  <input\r\n                    type=\"email\"\r\n                    value={reviewEmail}\r\n                    onChange={(e) => setReviewEmail(e.target.value)}\r\n                    placeholder=\"Your email...\"\r\n                    aria-label=\"Review email\"\r\n                    style={{ width: '100%', marginBottom: '5px', padding: '5px' }}\r\n                  />\r\n                  <input\r\n                    type=\"text\"\r\n                    value={reviewText}\r\n                    onChange={(e) => setReviewText(e.target.value)}\r\n                    placeholder=\"Write your review...\"\r\n                    aria-label=\"Review text\"\r\n                    style={{ width: '100%', marginBottom: '5px', padding: '5px' }}\r\n                  />\r\n                  <button\r\n                    className=\"cta-button\"\r\n                    onClick={handleSubmitReview}\r\n                    aria-label=\"Submit review\"\r\n                    style={{ padding: '5px 10px', fontSize: '14px' }}\r\n                  >\r\n                    Submit Review\r\n                  </button>\r\n                  {error && <p className=\"error-message\" style={{ color: 'red', marginTop: '5px' }}>{error}</p>}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      <footer className=\"details-footer\">\r\n        <p>© 2025 MovieVerse. All rights reserved.</p>\r\n        <div className=\"footer-links\">\r\n          <Link to=\"/\">Home</Link>\r\n          <Link to=\"/privacy\">Privacy</Link>\r\n          <Link to=\"/terms\">Terms</Link>\r\n        </div>\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MovieDetails;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}